import { motion, AnimatePresence } from 'framer-motion';

import { colors } from '../../data/colors';
import type { Symbol } from '../../models/symbol';

type MergeEffectProps = {
  symbol: Symbol;
  isVisible: boolean;
  setIsVisible(isVisible: boolean): void;
};

function MergeEffect({ symbol, isVisible, setIsVisible }: MergeEffectProps) {
  const color = colors[symbol];

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.svg
          initial={{ opacity: 0 }}
          animate={{ opacity: 1, scale: 2.4 }}
          exit={{ scale: 2, opacity: 0, transition: { duration: 0.25 } }}
          transition={{ duration: 0.75, type: 'spring' }}
          onAnimationComplete={() => setIsVisible(false)}
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 640"
          stroke="#ffffff66"
          strokeWidth="1.5"
          className="absolute inset-0 z-10"
        >
          <path
            fill={color}
            d="M561.938 307.188C563 309 563 309 563.125 311.5c-1.396 3.102-2.884 3.555-5.953 4.777-4.171 1.388-8.457 2.189-12.766 3.028l-3.1.623a2912 2912 0 0 1-9.806 1.947q-4.797.956-9.594 1.917-3.185.638-6.37 1.268a591 591 0 0 0-16.048 3.41l-3.163.717q-2.962.676-5.917 1.384c-4.72 1.077-8.662 1.968-13.408.429-1.375-2.562-1.375-2.562-2-5 3.68-5.078 8.916-5.462 14.703-6.621l3.24-.687c3.433-.724 6.87-1.427 10.307-2.13q3.354-.702 6.707-1.408 6.68-1.403 13.37-2.775a1471 1471 0 0 0 13.487-2.84l3.305-.706q3.092-.662 6.18-1.338c11.982-2.549 11.982-2.549 15.639-.308"
          />
          <path
            fill={color}
            d="M489.438 91.625C492 92 492 92 493.75 93.563 495 96 495 96 495.5 99.563c.531 3.65.71 4.288 3.5 6.437 2.2.712 2.2.712 4.563 1.063 4.229.729 4.229.729 6.437 2.937.375 2.438.375 2.438 0 5-2.793 3.143-6.22 3.655-10.195 4.375-2.196.557-2.196.557-3.805 3.625-.582 2.04-1.004 4.084-1.437 6.16C494 131 494 131 492 133c-2.437.375-2.437.375-5 0-2.7-2.41-2.993-3.942-3.437-7.562-.248-3.392-.248-3.392-2.125-5.25-2.243-1.093-4.153-1.673-6.563-2.25C471 117 471 117 469 115c-.375-2.437-.375-2.437 0-5 2.398-2.686 3.97-2.996 7.563-3.5 3.65-.531 4.288-.71 6.437-3.5.712-2.2.712-2.2 1.063-4.562 1.06-6.15 1.06-6.15 5.375-6.813"
          />
          <path
            fill={color}
            d="M511.688 473.375 514 474l.55 2.336.763 3.039.738 3.023c.77 2.91.77 2.91 3.949 4.602q2.269.698 4.563 1.313c4.23 1.332 4.23 1.332 6 4.375L531 495c-2.45 3.061-4.304 4.239-8.062 5-2.683.583-3.763.847-5.875 2.688-1.398 3.04-1.635 6.008-2.063 9.312-2 2-2 2-5 2.25-3-.25-3-.25-5-2.25-.633-2.602-.633-2.602-1.125-5.625l-.508-3.04L503 501l-2.555-.48-3.32-.707-3.305-.668C491 498 491 498 489.43 495.637c-.43-2.637-.43-2.637.629-4.856 2.9-2.661 5.901-3.035 9.664-3.875 2.398-.705 2.398-.705 3.527-2.773.663-1.887 1.187-3.822 1.688-5.758 1.278-4.06 2.33-5.617 6.75-5"
          />
          <path
            fill={color}
            d="M89.938 235.813C93 236 93 236 95 238c.326 1.468.59 2.95.813 4.438.754 3.746.754 3.746 3.374 6.5 3.225 1.218 6.498 2.124 9.813 3.062l2 2c-.33 3.297-.623 4.623-3 7-2.287.614-4.577 1.014-6.906 1.438-2.294.429-2.294.429-4.094 2.562-.604 2.132-.604 2.132-1 4.5-.778 4.278-.778 4.278-3 6.5-3.625-.375-3.625-.375-7-1l-.516-2.336-.734-3.039-.703-3.023c-.803-2.683-.803-2.683-2.895-3.887a65 65 0 0 0-6.34-1.777C71 260 71 260 70 259c-.25-2.937-.25-2.937 0-6 3.004-2.003 4.71-2.493 8.188-3.125l2.73-.508L83 249l.621-2.59.817-3.347.808-3.34c1.018-3.676 1.018-3.676 4.692-3.91"
          />
          <path
            fill={color}
            d="M475 362c6.725.346 11.173 3.117 16.813 6.625q2.922 1.774 5.847 3.543l3.106 1.888c5.615 3.375 11.301 6.623 16.984 9.882 3.12 1.79 6.237 3.58 9.346 5.39a257 257 0 0 0 5.855 3.27l2.752 1.53 2.443 1.32C540 397 540 397 540.858 399.566 541 402 541 402 539.563 403.813L538 405c-4.089-1.254-7.631-2.763-11.324-4.914l-3.08-1.784-3.284-1.927-3.418-1.991a3050 3050 0 0 1-9.03-5.29 3518 3518 0 0 0-5.638-3.302q-4.635-2.709-9.26-5.433l-3.533-2.074q-2.479-1.457-4.953-2.922l-2.846-1.678c-7.295-4.667-7.295-4.667-8.634-8.685z"
          />
          <path
            fill={color}
            d="M522 245c1 3 1 3 0 6-1.602 1.578-1.602 1.578-3.625 3.25-2.744 2.324-5.362 4.679-7.875 7.25a116 116 0 0 1-7.227 6.758c-4.147 3.606-8.155 7.342-12.148 11.117l-4.2 3.93a440 440 0 0 0-7.007 6.703l-2.606 2.492-2.199 2.156C473 296 473 296 470.23 295.72L468 295c-.777-2.195-.777-2.195-1-5 1.809-2.43 1.809-2.43 4.438-4.875l2.558-2.43c2.252-2.044 4.545-4.04 6.84-6.035 4.219-3.678 8.292-7.496 12.351-11.348l4.454-4.203 2.213-2.088q4.775-4.497 9.584-8.959l1.627-1.52c4.11-3.803 5.439-4.844 10.935-3.542"
          />
          <path
            fill={color}
            d="M553.84 350.45c2.461.627 3.507 1.323 5.222 3.175 2.105 3.667 2.641 5.244 1.938 9.375-1.248 2.745-2.353 4.473-4.687 6.375-3.598.972-6.76.731-10.313-.375-2.589-2.136-3.71-3.636-4.41-6.934-.287-3.896.19-5.724 2.347-9.066 3.558-2.324 5.716-2.795 9.903-2.55"
          />
          <path
            fill={color}
            d="M160 130c2.517 2.13 3.719 3.686 4.414 6.934.283 3.936-.181 5.717-2.414 9.066-3.332 2.221-5.141 2.752-9.066 2.484-3.436-.86-4.92-2.677-6.934-5.484-1.191-3.573-1.332-5.206.125-8.687 4.117-5.078 7.533-6.158 13.875-4.313"
          />
          <path
            fill={color}
            d="M191.066 434.586c3.248.695 4.805 1.897 6.934 4.414 1.158 3.98 1.453 6.028-.312 9.813-2.097 2.718-3.098 4.013-6.438 5-3.997.23-5.902-.682-9.25-2.813-2.462-3.693-2.792-6.715-2-11 3.036-4.554 5.784-5.794 11.066-5.414"
          />
        </motion.svg>
      )}
    </AnimatePresence>
  );
}

export default MergeEffect;
